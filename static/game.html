<!doctype html>
<html><head>
    <title>Hangman Game</title>
    <style>
 .gameArea {
  text-align:
  center;
  font-size: 2em;
  }
 </style>
</head>
<body>
    <div class="gameArea">
        <div class="score"> </div>
        <div class="puzzle"></div>
        <div class="letters"></div>
        <button>Start Game</button>
    </div>
    <script>
      let words = ["monitor", "program", "application", "keyboard", "javascript", "gaming", "network", "antifungals", "bifunctional", "cofunction"];
      let button = QS("button");
      button.addEventListener("click",startGame);
      let lettersElement = QS(".letters");
      let puzzleElement = QS(".puzzle");
      let scoreElement = QS(".score");

      function startGame() {
        if(!words[0])  alert(false);
        else {
          button.style.display = 'none';
          let game = new Word(words);
          game.builder();
        }//endelse
      }//endfunction

      class Word {

        constructor(array){
          let index = Math.floor(Math.random()*array.length);
          this.wordString = array.splice(index,1)[0];
          this.elements = this.wordString.split("");
          this.letters = this.elements.filter((letter, index, array) => array.indexOf(letter) === index);
        }

        builder(){
          let lettersArray = this.letters;
          lettersElement.innerHTML = "";
          puzzleElement.innerHTML = "";
          scoreElement.innerHTML = "";

          let paragraphPuzzle = generator("p", puzzleElement, "Your word: ", "puzzle");
          this.elements.forEach((element, index) => {
            let puzzleSlot = generator("i", paragraphPuzzle, "-", "puzzle");
            puzzleSlot.id = element;
          });

          let paragraphScore = generator("p", lettersElement, `Your score(tries remaining): `, "score");
          let scoreCount = generator("i", paragraphScore, 5, "score");

          let paragraphLetters = generator("p", lettersElement, `Letters remaining: `, "letters");
          let lettersCount = generator("i", paragraphLetters, Number(lettersArray.length), "letters");
          let brElement = generator("br", paragraphLetters, null, null);
          for(let index = 0; index < 26; index++) {
            let letterSlot = generator("i", lettersElement, String.fromCharCode(97+index), "box");
            generator("i", lettersElement, index < 25 ? " " : "", "box");
            letterSlot.id = index;
            letterSlot.addEventListener("click", checkLetter);
          };

          function checker(){
            let lettersCounter = Number(lettersCount.textContent);
            let scoreCounter = Number(scoreCount.textContent);
            if (lettersCounter*scoreCounter === 0) {
              document.body.innerHTML = "";
              let image = generator("img", document.body, null, null);
              image.src = lettersCounter === 0 ? "https://t4.ftcdn.net/jpg/03/03/19/17/360_F_303191781_EIjmA94tyJ0vzootu8WUIYFXPKxVY1Kc.jpg"
              : "https://static.wikia.nocookie.net/game-over-dex/images/1/12/Mortal_Kombat_4_game_over_screen.jpg/revision/latest?cb=20180506215318";
              image.style.width = "100%";
              image.addEventListener("click", function() {setTimeout(window.location.reload(), 250);});
            }
          }

          function checkLetter(){
            let guessedLetter = this.textContent;
            let guessIsRight = Boolean(lettersArray.indexOf(guessedLetter)+1);
            if(guessIsRight) {
              QSA(`#${guessedLetter}`).forEach((el) => {
                el.textContent = guessedLetter;
              });//endforeach
              lettersCount.innerText--;
            }//endif
            else scoreCount.innerText--;

            checker();
            this.removeEventListener("click", checkLetter);
            this.style.color ="#fff";
          }//endcheckLetter
         } //endbuilder
        }//endClass

      function generator(type, parent, outputContent, elementClass) {
        let element = document.createElement(type);
        element.textContent = outputContent;
        element.class  = elementClass;
        return parent.appendChild(element);
      }//endfunction

      function QS(str) {return document.querySelector(str);}
      function QSA(str) {return document.querySelectorAll(str);}
      function rand(array) {
        let index = Math.floor(Math.random()*array.length);
        return array.splice(index,1);
      }//endfunction

    </script>
</body>
</html>
